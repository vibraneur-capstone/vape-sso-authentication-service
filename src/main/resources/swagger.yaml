swagger: '2.0'
info:
  description: Single Sign On service for V.A.P.E
  title: V.A.P.E S.S.O
  version: 0.0.1 snapshot
host: localhost:8821
basePath: /sso
schemes:
  - http
  - https
paths:
  '/session/{sessionId}/secret/{secret}':
    get:
      tags:
        - Check if session is active
      summary: check if a session is alive
      operationId: checkSession
      produces:
        - application/json

      parameters:
        - in: path
          name: sessionId
          required: true
          type: string
          description: The id of session to check
        - in: path
          name: secret
          required: true
          type: string
          description: The secret of session to check

      responses:
        '200':
          description: Successful operation
          schema:
            $ref: '#/definitions/SessionState'
          headers:
            Access-Control-Allow-Origin:
              type: string
        '400':
          description: Bad Request
          schema:
            $ref: '#/definitions/Exception'
        '404':
          description: Not Found
          schema:
            $ref: '#/definitions/Exception'
        '500':
          description: Server Error
          schema:
            $ref: '#/definitions/Exception'

  '/session/activate':
    post:
      tags:
        - Activate new session
      operationId: ActivateNewSession
      summary: Activate new session
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - in: body
          name: Credential
          required: true
          schema:
            $ref: '#/definitions/SessionRequest'
      responses:
        '200':
          description: Successful operation
          schema:
            $ref: '#/definitions/SessionResponse'
          headers:
            Access-Control-Allow-Origin:
              type: string
              description: allowed url
        '400':
          description: Bad Request
          schema:
            $ref: '#/definitions/Exception'
        '404':
          description: Not Found
          schema:
            $ref: '#/definitions/Exception'
        '500':
          description: Server Error
          schema:
            $ref: '#/definitions/Exception'

definitions:
  SessionResponse:
    type: object
    properties:
      sessionId:
        type: string
        readOnly: true
      secrete:
        type: string
        readOnly: true
  SessionRequest:
    type: object
    properties:
      user:
        type: string
      pwd:
        type: string
  SessionState:
    type: object
    properties:
      status:
        $ref: '#/definitions/SessionStatus'
  SessionStatus:
    type: string
    enum:
      - EXPIRED
      - INVALID
      - ACTIVE
  Exception:
    type: object
    properties:
      message:
        type: string
        readOnly: true
      errorCode:
        type: string
        readOnly: true
